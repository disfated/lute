# Working docs for Lute v3 in Python/Flask

Planned successor to https://github.com/jzohrab/lute

**Currently in exploratory development only!**

# Requirements

Python 3

# Install

```
python3 -m venv .venv
source .venv/bin/activate

# Install dependencies (some from other git repos, see requirements.txt)
pip install -r requirements.txt

deactivate
```

# Unit testing

```
source .venv/bin/activate  # if needed

pip install -e py_src/
make test

deactivate  # if needed
```

Run tests and see printouts

```
make testprint
```

Specific test

```
make test ARGS="-k test_name_here"
```

# Integration testing with Panther

Summary:

- start the PHP web server
- start the Python web server
- start nginx reverse proxy
- run tests, going through the nginx reverse proxy.  Note the acceptance test base has a check for V3_STRANGLE_USING_NGINX .env file key.

```
# In tab #1
composer dev:start

# In tab #2 (with env activated), start luteV3
python py_src/lute_v3.py

# In tab #3, from lute_dev root, start nginx, then run a test
nginx -c `pwd`/docs/nginx.conf

composer test:v3:group smoketestbook
```

When done:

* in tab #2: Ctrl-C to break
* tab #3: nginx -s stop